<div class="container">
  <mat-card class="subscription-card">
    <mat-card-header class="card-header">
      <div class="header-content">
        <mat-card-title>Contratar Suscripción</mat-card-title>
        <mat-card-subtitle>Selecciona un plan y completa el pago seguro</mat-card-subtitle>
      </div>
      <mat-icon class="header-icon">verified_user</mat-icon>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="form" (submit)="aceptar()">

        <div class="section-title">
          <span class="step-number">1</span>
          <h3>Selecciona tu Plan</h3>
        </div>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Plan Disponible</mat-label>
          <mat-select formControlName="planesSuscripcion">
            @for (plan of listaPlanes; track plan.idPlanesSuscripcion) {
              <mat-option [value]="plan.idPlanesSuscripcion">
                {{ plan.nombre_plan }} - S/. {{ plan.precio }}
              </mat-option>
            }
          </mat-select>
          <mat-icon matSuffix>star</mat-icon>
          <mat-error>Es necesario seleccionar un plan</mat-error>
        </mat-form-field>

        <mat-divider></mat-divider>

        <div class="section-title">
          <span class="step-number">2</span>
          <h3>Método de Pago</h3>
        </div>

        <div class="payment-box">
          <div class="card-icons">
            <mat-icon>credit_card</mat-icon>
            <span>Tarjeta de Crédito / Débito</span>
          </div>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Titular de la Tarjeta</mat-label>
            <input matInput formControlName="nombreTarjeta" placeholder="COMO APARECE EN LA TARJETA" style="text-transform: uppercase;">
            <mat-icon matSuffix>person</mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Número de Tarjeta</mat-label>
            <input matInput formControlName="numeroTarjeta" placeholder="0000 0000 0000 0000" maxlength="16">
            <mat-icon matSuffix>payment</mat-icon>
            <mat-error>Debe tener 16 dígitos</mat-error>
          </mat-form-field>

          <div class="row">
            <mat-form-field appearance="outline" class="half-width">
              <mat-label>Vencimiento (MM/YY)</mat-label>
              <input matInput formControlName="fechaExp" placeholder="MM/YY" maxlength="5">
            </mat-form-field>

            <mat-form-field appearance="outline" class="half-width">
              <mat-label>CVV</mat-label>
              <input matInput formControlName="cvv" type="password" placeholder="123" maxlength="3">
              <mat-icon matSuffix>lock</mat-icon>
            </mat-form-field>
          </div>
          
          <div class="secure-badge">
            <mat-icon>lock</mat-icon> Transacción encriptada y segura
          </div>
        </div>

        <div class="actions">
          <button mat-button type="button" color="warn" (click)="cancelar()">
            Cancelar
          </button>
          
          <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid" class="btn-pay">
            <mat-icon>shopping_cart_checkout</mat-icon>
            Pagar y Suscribirse
          </button>
        </div>

      </form>
    </mat-card-content>
  </mat-card>
</div>