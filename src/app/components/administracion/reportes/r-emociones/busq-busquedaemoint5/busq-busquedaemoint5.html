<!-- <p>busq-busquedaemoint5 works!</p> -->
 <div class="container" style="padding: 20px;">
  
  <h2 style="text-align: center; color: #d32f2f;">Reporte de Emociones Críticas (Intensidad 5)</h2>

  <div class="chart-container" style="width: 50%; margin: 0 auto;">
    <canvas baseChart
      [data]="pieChartData"
      [type]="pieChartType"
      [options]="pieChartOptions">
    </canvas>
  </div>

  <hr style="margin: 30px 0;">

  <h3>Detalle de Registros</h3>
  
  <table mat-table [dataSource]="listaEmociones" class="mat-elevation-z8" style="width: 100%;">

    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef> ID </th>
      <td mat-cell *matCellDef="let element"> {{element.idEmociones}} </td>
    </ng-container>

    <ng-container matColumnDef="tipo">
      <th mat-header-cell *matHeaderCellDef> Tipo Emoción </th>
      <td mat-cell *matCellDef="let element"> 
        <span style="font-weight: bold;">{{element.tipoEmocion}}</span> 
      </td>
    </ng-container>

    <ng-container matColumnDef="fecha">
      <th mat-header-cell *matHeaderCellDef> Fecha Crisis </th>
      <td mat-cell *matCellDef="let element"> 
        {{element.crisis?.fecha | date:'dd/MM/yyyy'}} 
      </td>
    </ng-container>

    <ng-container matColumnDef="usuario">
        <th mat-header-cell *matHeaderCellDef> Usuario </th>
        <td mat-cell *matCellDef="let element"> 
          {{element.crisis?.usuario?.username || 'N/A'}} 
        </td>
      </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

</div>
