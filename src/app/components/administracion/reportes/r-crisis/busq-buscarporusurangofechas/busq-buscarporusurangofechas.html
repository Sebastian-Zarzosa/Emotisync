<!-- <p>busq-buscarporusurangofechas works!</p> -->
 <div class="container">
  
    <h2 class="titulo-reporte">Búsqueda Histórica de Usuario</h2>
  
    <!-- FORMULARIO DE BÚSQUEDA -->
    <div class="search-box mat-elevation-z2">
      
      <!-- Input ID Usuario -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>ID Usuario</mat-label>
        <input matInput type="number" [(ngModel)]="userId" placeholder="Ej: 1">
        <mat-icon matSuffix>person</mat-icon>
      </mat-form-field>
  
      <!-- Input Fecha Inicio -->
      <mat-form-field appearance="outline">
        <mat-label>Fecha Inicio</mat-label>
        <input matInput [matDatepicker]="picker1" [(ngModel)]="fechaInicio">
        <mat-datepicker-toggle matIconSuffix [for]="picker1"></mat-datepicker-toggle>
        <mat-datepicker #picker1></mat-datepicker>
      </mat-form-field>
  
      <!-- Input Fecha Fin -->
      <mat-form-field appearance="outline">
        <mat-label>Fecha Fin</mat-label>
        <input matInput [matDatepicker]="picker2" [(ngModel)]="fechaFin">
        <mat-datepicker-toggle matIconSuffix [for]="picker2"></mat-datepicker-toggle>
        <mat-datepicker #picker2></mat-datepicker>
      </mat-form-field>
  
      <button mat-raised-button color="primary" (click)="buscar()" class="btn-buscar">
        <mat-icon>search</mat-icon> BUSCAR
      </button>
    </div>
  
    <!-- MENSAJES DE ERROR -->
    <div *ngIf="mensajeError" class="error-msg">
      <mat-icon>error_outline</mat-icon> {{ mensajeError }}
    </div>
  
    <!-- RESULTADOS -->
    <div *ngIf="hasData" class="results-section">
      
      <!-- GRÁFICO DE LÍNEA -->
      <div class="chart-container mat-elevation-z4">
        <canvas baseChart
          [data]="lineChartData"
          [options]="lineChartOptions"
          [type]="lineChartType">
        </canvas>
      </div>
  
      <!-- TABLA DETALLADA -->
      <div class="table-container mat-elevation-z4">
        <table mat-table [dataSource]="listaCrisis">
          
          <!-- ID Column -->
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef> ID Crisis </th>
            <td mat-cell *matCellDef="let element"> {{element.idCrisis}} </td>
          </ng-container>
  
          <!-- Fecha Column -->
          <ng-container matColumnDef="fecha">
            <th mat-header-cell *matHeaderCellDef> Fecha </th>
            <td mat-cell *matCellDef="let element"> {{element.fecha | date:'dd/MM/yyyy'}} </td>
          </ng-container>
  
          <!-- Ritmo Column -->
          <ng-container matColumnDef="ritmo">
            <th mat-header-cell *matHeaderCellDef> Ritmo </th>
            <td mat-cell *matCellDef="let element" style="color: #d32f2f; font-weight: bold;"> 
              {{element.ritmo}} bpm 
            </td>
          </ng-container>
  
          <!-- Duración Column -->
          <ng-container matColumnDef="duracion">
            <th mat-header-cell *matHeaderCellDef> Duración </th>
            <td mat-cell *matCellDef="let element"> {{element.tiempoRespuesta}} min </td>
          </ng-container>
  
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>
  
    </div>
  </div>
